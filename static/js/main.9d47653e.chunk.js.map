{"version":3,"sources":["App.tsx","drawGrid.tsx","reportWebVitals.ts","index.tsx"],"names":["grid","head","food","GRID_SIZE","fillOneCell","cell","color","y","x","keyPress","tail","App","useState","refreshGrid","setRefreshGrid","start","gameOver","gameOptions","setGameOptions","useEffect","document","body","addEventListener","e","key","positionCheck","addNewFruit","moveTail","moveHead","interval","setInterval","clearInterval","forEach","t","dir","push","_","shift","className","type","onClick","map","element","el","style","width","height","id","size","gridArr","gridArr2d","i","j","drawGrid","splice","length","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"6HAOIA,EAMAC,EACAC,E,4DAREC,G,YAAY,IAGZC,EAAc,SAACC,EAAYC,GAC/BN,EAAKK,EAAKE,GAAGF,EAAKG,GAAGH,KAAOC,GAK1BG,EAAW,GACTC,EAAe,GA8KNC,EAxKH,WAAM,MAOsBC,oBAAS,GAP/B,mBAOTC,EAPS,KAOIC,EAPJ,OAQsBF,mBAAS,CAACG,OAAO,EAAOC,UAAU,IARxD,mBAQTC,EARS,KAQIC,EARJ,KA2BhBC,qBAAU,WACRC,SAASC,KAAKC,iBAAiB,WAAW,SAACC,GACzCd,EAAWc,EAAEC,SAEd,IAEHL,qBAAU,WACR,GAAKF,EAAYF,MAAjB,CAGAU,IACAC,IACAC,IACAC,EAASnB,GAET,IAAMoB,EAAWC,aAAY,WAC3BhB,GAAgBD,KACf,KAGH,OAFAa,IAEO,kBAAMK,cAAcF,OAC1B,CAAChB,IAEJ,IAAMY,EAAgB,WACpBf,EAAKsB,SAAQ,SAACC,GACRA,EAAEzB,IAAMP,EAAKO,GAAKyB,EAAE1B,IAAMN,EAAKM,GACjCW,EAAe,CAACH,OAAO,EAAOC,UAAU,QAKxCY,EAAW,SAACM,GAChB,OAAQA,GACN,IAAK,aAEDjC,EADaE,KAAXF,EAAKO,EACA,CAACA,EAAG,EAAGD,EAAGN,EAAKM,GAEf,CAACC,EAAGP,EAAKO,EAAI,EAAGD,EAAGN,EAAKM,GAEjCH,EAAY,CAACI,EAAGP,EAAKO,EAAGD,EAAGN,EAAKM,GAAI,SACpC,MAEF,IAAK,YAEDN,EADaE,KAAXF,EAAKM,EACA,CAACC,EAAGP,EAAKO,EAAGD,EAAG,GAEf,CAACC,EAAGP,EAAKO,EAAGD,EAAGN,EAAKM,EAAI,GAGjCH,EAAY,CAACI,EAAGP,EAAKO,EAAGD,EAAGN,EAAKM,GAAI,SACpC,MAEF,IAAK,YAEDN,EADa,IAAXA,EAAKO,EACA,CAACA,EAAGL,GAAeI,EAAGN,EAAKM,GAE3B,CAACC,EAAGP,EAAKO,EAAI,EAAGD,EAAGN,EAAKM,GAEjCH,EAAY,CAACI,EAAGP,EAAKO,EAAGD,EAAGN,EAAKM,GAAI,SAEpC,MACF,IAAK,UAEDN,EADa,IAAXA,EAAKM,EACA,CAACC,EAAGP,EAAKO,EAAGD,EAAGJ,IAEf,CAACK,EAAGP,EAAKO,EAAGD,EAAGN,EAAKM,EAAI,GAGjCH,EAAY,CAACI,EAAGP,EAAKO,EAAGD,EAAGN,EAAKM,GAAI,WAMpCoB,EAAW,WACfjB,EAAKyB,KAAK,CAAC3B,EAAGP,EAAKO,EAAGD,EAAGN,EAAKM,IAC9BH,EAAYM,EAAK,GAAI,SACjBT,EAAKO,IAAMN,EAAKM,GAAKP,EAAKM,IAAML,EAAKK,GACvCL,EAAO,CAACM,EAAG4B,SAASjC,IAAgBI,EAAG6B,SAASjC,KAChDC,EAAYF,EAAM,SAElBQ,EAAK2B,QAEP3B,EAAKsB,SAAQ,SAACC,GAAD,OAAO7B,EAAY6B,EAAG,YAG/BP,EAAc,WACbxB,IACHA,EAAO,CAACM,EAAG4B,SAASjC,IAAgBI,EAAG6B,SAASjC,KAChDC,EAAYF,EAAM,UAItB,OACE,8BACE,sBAAKoC,UAAU,YAAf,UACE,oBAAIA,UAAU,UAAd,mDACA,qBAAKA,UAAU,6BAAf,SACE,qBAAKA,UAAU,YAAf,SACE,sBAAKA,UAAU,OAAf,UACGrB,EAAYD,UACX,yBACEuB,KAAK,SACLD,UAAU,0BACVE,QAAS,WACPtB,EAAe,CAACH,OAAO,EAAOC,UAAU,KAJ5C,UAOG,IAPH,gBAWAC,EAAYF,MAMZ,mCACGf,GACCA,EAAKyC,KAAI,SAACC,GAAD,OACPA,EAAQD,KAAI,SAACE,GAAD,OACV,sBACEL,UAAWK,EAAGtC,KAEduC,MAAO,CAACC,MAAM,GAAD,OAAK,IAAM1C,EAAX,MAA0B2C,OAAO,GAAD,OAAK,IAAM3C,EAAX,QADxCwC,EAAGI,YAXlB,yBAAQR,KAAK,SAASD,UAAU,SAASE,QAAS,kBA/H9DtB,EAAe,2BAAID,GAAL,IAAkBF,OAAO,KACvCf,EC/BoB,SAACgD,GAIvB,IAHA,IAAIC,EAAkB,GAChBC,EAAsB,GACxBH,EAAK,EACAI,EAAI,EAAGA,EAAIH,EAAMG,IAAK,CAC7B,IAAK,IAAIC,EAAI,EAAGA,EAAIJ,EAAMI,IACxBH,EAAQd,KAAK,CAACY,KAAI1C,KAAM,UACxB0C,GAAM,EAERG,EAAUf,KAAKc,GACfA,EAAU,GAEZ,OAAOC,EDmBEG,CAASlD,GAChBM,EAAW,aACXR,EAAO,CAACO,EAAG,EAAGD,EAAG,GACjBG,EAAK4C,OAAO,EAAG5C,EAAK6C,QACpB7C,EAAKyB,KAAK,CAAC3B,EAAG,EAAGD,EAAG,IACpBG,EAAKyB,KAAK,CAAC3B,EAAG,EAAGD,EAAG,IACpBL,EAAO,CAACM,EAAG4B,SAASjC,IAAgBI,EAAG6B,SAASjC,KAChDC,EAAYH,EAAM,SAClBS,EAAKsB,SAAQ,SAACC,GAAD,OAAO7B,EAAY6B,EAAG,WACnC7B,EAAYF,EAAM,aAClBY,GAAgBD,IAoHJ,UACG,IADH,wBEpJD2C,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBC,MAAK,YAAkD,IAA/CC,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAON,GACPO,EAAQP,OCHdQ,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEF/C,SAASgD,eAAe,SAM1BZ,M","file":"static/js/main.9d47653e.chunk.js","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport * as _ from 'lodash';\nimport './App.css';\nimport 'flexboxgrid';\nimport {drawGrid, Grid, CellColor, Cell} from './drawGrid';\n\nconst GRID_SIZE = 22;\nlet grid: Grid[][];\n\nconst fillOneCell = (cell: Cell, color: CellColor) => {\n  grid[cell.y][cell.x].cell = color;\n};\n\nlet head: Cell;\nlet food: Cell;\nlet keyPress = '';\nconst tail: Cell[] = [];\n\n// fillOneCell(head, 'snake');\n// tail.forEach((t) => fillOneCell(t, 'tail'));\n// fillOneCell(food, 'food');\n\nconst App = () => {\n  // const [head, setHead] = useState<Cell>({x: 2, y: 0});\n  // const [food, setFood] = useState<Cell>({x: _.random(9), y: _.random(9)});\n  // const [tail, setTail] = useState<Cell[]>([\n  //   {x: 0, y: 0},\n  //   {x: 1, y: 0},\n  // ]);\n  const [refreshGrid, setRefreshGrid] = useState(true);\n  const [gameOptions, setGameOptions] = useState({start: false, gameOver: false});\n  // const [keyPress, setKeyPress] = useState('');\n  // const [direction, setDirection] = useState<Direction>('ArrowRight');\n\n  const startGame = () => {\n    setGameOptions({...gameOptions, start: true});\n    grid = drawGrid(GRID_SIZE);\n    keyPress = 'ArrowRight';\n    head = {x: 2, y: 0};\n    tail.splice(0, tail.length);\n    tail.push({x: 0, y: 0});\n    tail.push({x: 1, y: 0});\n    food = {x: _.random(GRID_SIZE - 1), y: _.random(GRID_SIZE - 1)};\n    fillOneCell(head, 'snake');\n    tail.forEach((t) => fillOneCell(t, 'tail'));\n    fillOneCell(food, 'food');\n    setRefreshGrid(!refreshGrid);\n  };\n\n  useEffect(() => {\n    document.body.addEventListener('keydown', (e) => {\n      keyPress = e.key;\n    });\n  }, []);\n\n  useEffect(() => {\n    if (!gameOptions.start) {\n      return;\n    }\n    positionCheck();\n    addNewFruit();\n    moveTail();\n    moveHead(keyPress);\n\n    const interval = setInterval(() => {\n      setRefreshGrid(!refreshGrid);\n    }, 150);\n    addNewFruit();\n    // eslint-disable-next-line consistent-return\n    return () => clearInterval(interval);\n  }, [refreshGrid]);\n\n  const positionCheck = () => {\n    tail.forEach((t) => {\n      if (t.x === head.x && t.y === head.y) {\n        setGameOptions({start: false, gameOver: true});\n      }\n    });\n  };\n\n  const moveHead = (dir: string) => {\n    switch (dir) {\n      case 'ArrowRight':\n        if (head.x === GRID_SIZE - 1) {\n          head = {x: 0, y: head.y};\n        } else {\n          head = {x: head.x + 1, y: head.y};\n        }\n        fillOneCell({x: head.x, y: head.y}, 'snake');\n        break;\n\n      case 'ArrowDown':\n        if (head.y === GRID_SIZE - 1) {\n          head = {x: head.x, y: 0};\n        } else {\n          head = {x: head.x, y: head.y + 1};\n        }\n\n        fillOneCell({x: head.x, y: head.y}, 'snake');\n        break;\n\n      case 'ArrowLeft':\n        if (head.x === 0) {\n          head = {x: GRID_SIZE - 1, y: head.y};\n        } else {\n          head = {x: head.x - 1, y: head.y};\n        }\n        fillOneCell({x: head.x, y: head.y}, 'snake');\n\n        break;\n      case 'ArrowUp':\n        if (head.y === 0) {\n          head = {x: head.x, y: GRID_SIZE - 1};\n        } else {\n          head = {x: head.x, y: head.y - 1};\n        }\n\n        fillOneCell({x: head.x, y: head.y}, 'snake');\n\n        break;\n    }\n  };\n\n  const moveTail = () => {\n    tail.push({x: head.x, y: head.y});\n    fillOneCell(tail[0], 'empty');\n    if (head.x === food.x && head.y === food.y) {\n      food = {x: _.random(GRID_SIZE - 1), y: _.random(GRID_SIZE - 1)};\n      fillOneCell(food, 'food');\n    } else {\n      tail.shift();\n    }\n    tail.forEach((t) => fillOneCell(t, 'tail'));\n  };\n\n  const addNewFruit = () => {\n    if (!food) {\n      food = {x: _.random(GRID_SIZE - 1), y: _.random(GRID_SIZE - 1)};\n      fillOneCell(food, 'food');\n    }\n  };\n\n  return (\n    <div>\n      <div className=\"container\">\n        <h1 className=\"heading\"> snake snake snake snake snake snake </h1>\n        <div className=\"row center-xs game-wrapper\">\n          <div className=\"col-xs-12\">\n            <div className=\"game\">\n              {gameOptions.gameOver && (\n                <button\n                  type=\"button\"\n                  className=\"button button--gameOver\"\n                  onClick={() => {\n                    setGameOptions({start: false, gameOver: false});\n                  }}\n                >\n                  {' '}\n                  game over!\n                </button>\n              )}\n              {!gameOptions.start ? (\n                <button type=\"button\" className=\"button\" onClick={() => startGame()}>\n                  {' '}\n                  start\n                </button>\n              ) : (\n                <>\n                  {grid &&\n                    grid.map((element) =>\n                      element.map((el) => (\n                        <span\n                          className={el.cell}\n                          key={el.id}\n                          style={{width: `${800 / GRID_SIZE}px`, height: `${800 / GRID_SIZE}px`}}\n                        >\n                          {/* {el.id} */}\n                        </span>\n                      ))\n                    )}\n                </>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","export type CellColor = 'empty' | 'snake' | 'food' | 'tail';\r\nexport type Direction = 'ArrowUp' | 'ArrowRight' | 'ArrowLeft' | 'ArrowDown';\r\nexport type Cell = {x: number; y: number};\r\nexport type Grid = {id: number; cell: CellColor};\r\n\r\nexport const drawGrid = (size: number): Grid[][] => {\r\n  let gridArr: Grid[] = [];\r\n  const gridArr2d: Grid[][] = [];\r\n  let id = 1;\r\n  for (let i = 0; i < size; i++) {\r\n    for (let j = 0; j < size; j++) {\r\n      gridArr.push({id, cell: 'empty'});\r\n      id += 1;\r\n    }\r\n    gridArr2d.push(gridArr);\r\n    gridArr = [];\r\n  }\r\n  return gridArr2d;\r\n};\r\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);  \n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}